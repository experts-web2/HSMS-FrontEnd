<div class="d-flex col-12 flex-column">
    
    <div class="d-flex flex-column col-12 border border-secondary rounded p-1" [formGroup]="medicationForm">
        <div formArrayName="medicationItems">
            <div *ngFor="let medication of medicationItems.controls; let i = index">
                <div [formGroupName]="i" class="d-flex flex-row justify-content-between col-12">
                    <div class="d-flex flex-column col-4">
                        <label htmlFor="name">Name</label>
                        <p-autoComplete name="name" class="col-12"  [suggestions]="suggestions" (completeMethod)="search($event)" formControlName="medicineId"></p-autoComplete>
                    </div>
                    <div class="d-flex flex-column col-md-3">
                        <label htmlFor="duration">Duration</label>
                        <input pInputText type="text" name="" id="duration" >
                        <p-treeSelect class="md:w-20rem w-full" containerStyleClass="w-full" placeholder="Select Duration" formControlName="duration"></p-treeSelect>
                    </div>
                    <div class="d-flex flex-column col-md-3">
                        <label htmlFor="dosage">Dosage</label>
                        <input pInputText type="text" name="" id="dosage" >
                        <p-treeSelect class="md:w-20rem w-full" containerStyleClass="w-full" placeholder="Select Dosage" formControlName="dosage"></p-treeSelect>
                    </div>
                </div>
                <div class="d-flex align-items-center justify-content-center">
                    <hr class="col-5">
                </div>
                <div [formGroupName]="i" class="d-flex flex-row justify-content-between col-12">
                    <div class="d-flex flex-column col-md-3">
                        <label htmlFor="route">Route</label>
                        <p-treeSelect id="route" class="md:w-20rem w-full" containerStyleClass="w-full" placeholder="Select Route" formControlName="route"></p-treeSelect>
                    </div>
                    <div class="d-flex flex-column col-md-3">
                        <label htmlFor="frequency">Frequency</label>
                        <p-treeSelect id="frequency" class="md:w-20rem w-full" containerStyleClass="w-full" placeholder="Select Frequency" formControlName="frequency"></p-treeSelect>
                    </div>
                    <div class="d-flex flex-column col-md-3">
                        <label htmlFor="instruction">Instruction</label>
                        <input pInputText type="text" name="" id="instruction" formControlName="instruction">
                    </div>
                </div>
                <button (click)="removeMedicationItem(i)"><i class="fas fa-trash"></i></button>
            </div>
        </div>
    </div>
    <div>
        <button class="btn btn-primary d-flex align-items-center" (click)="addMedicationItem()"><i class="pi pi-plus"></i> Drug</button>
        <textarea rows="2" cols="93" class="col-12" placeholder="Medication Notes" id="investigation" pInputTextarea ></textarea>
        <p-checkbox  [binary]="true" inputId="reminder" ></p-checkbox><label class="m-x-2" for="reminder">Send Reminder</label>
    </div>
</div>